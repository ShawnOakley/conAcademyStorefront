<!doctype html>
<html lang="en" dir="ltr"  ng-app="storefrontApp">
<head>
<title>Transfer MetaCoins</title>
<meta charset="utf-8">




</head>
<body ng-controller="StorefrontController">
<select
        ng-model="data.account"
        ng-options="account.label for account in accounts track by account.value"
        ng-change="activeAccountChanged()"
></select>
<h6>Your account: {{ data.account.value }}</h6>
<h6>Your balance: {{ data.balance }} (wei) {{data.balanceInEth}} (ether)</h6>
<div ng-if="data.permissions.owner">
    <div ng-if="data.contractBalance">
        <button ng-click="withdrawFunds()">Withdraw funds</button>
    </div>
    <div>Available funds to withdraw: {{data.contractBalance}}</div>
</div>
<div ng-if="data.permissions.admin">
    <input
        ng-model="data.priceInput"
        type="number"
    ></input>
    <input
        ng-model="data.stockInput"
        type="number"
    ></input>
    <button ng-click="addProduct()">Add product</button>
</div>

<ul>
    <li ng-repeat="product in products">
        <div ng-model="data.account" ng-if="product.active">
            <div>ID: {{product.id}}</div>
            <div>Price: {{product.price}}</div>
            <div>Stock: {{product.stock}}</div>
            <button ng-click="buyProduct(product.id, product.price)">
                Buy
            </button>
        </div>
        <div ng-if="!product.active">
            <div>Not available</div>
            <div>ID: {{product.id}}</div>
            <div>Price: {{product.price}}</div>
            <div>Stock: {{product.stock}}</div>
            <button ng-disabled="true">
                Buy
            </button>
        </div>

    </li>
</ul>
<script src="bower_components/angular/angular.js"></script>
<script src="js/app.js"></script>
</body>
</html>
